===================================
Output & Results
===================================

Command Line Output
===================
When running the workflow you should see output similar to:

.. code-block:: console

    N E X T F L O W  ~  version 22.10.5
    Launching `https://github.com/mriffle/nf-skyline-targeted-import` [nasty_kalam] DSL2 - revision: 9e44bb5c46 [import-raw]
    executor >  slurm (24)
    [6b/81d78d] process > SAVE_RUN_DETAILS                           [100%] 1 of 1 ✔
    [44/c6432e] process > skyline_import:SKYLINE_IMPORT_SPECTRA (16) [100%] 16 of 16 ✔
    [c8/de923f] process > skyline_import:SKYLINE_MERGE_RESULTS       [100%] 1 of 1 ✔
    [dc/5c807b] process > skyline_reports:SKYLINE_RUN_REPORTS        [100%] 1 of 1 ✔
    [ee/ee3dfc] process > panorama_upload_results:UPLOAD_FILE (5)    [100%] 5 of 5 ✔
    Completed at: 17-Nov-2023 13:58:42
    Duration    : 1m 37s
    CPU hours   : 1.0
    Succeeded   : 24

The first line shows the version of Nextflow you are running. The second line shows the version of the workflow
you are running. The third line shows the executor you are using. An executor in Nextflow describes the actual
system the steps of the workflow are running on. In this case the *slurm* computer cluster executor was used.
The next several lines show spectra being loaded into the Skyline template document and reports being run. In
this example, 16 RAW files were imported into the Skyline document. The next line shows that 5 files were
uploaded to PanoramaWeb. The final four lines appear when the workflow completes, showing the completion time,
how long it took, and the number of steps that succeeded.

Workflow Log
============
The log file called ``.nextflow.log`` will appear in the directory in which the workflow was run. It can be helpful
for determining the cause of any problems. A log file will also be generated for each task executed by the workflow,
which will be described below.

Workflow Results
================
All results will be output to the ``results/nf-skyline-targeted-import`` subdirectory in the directory in which the workflow was
run. In this directory is a subdirectory for each program that was run as part of the workflow. By default, the final
Skyline document called ``final.sky.zip`` will be present in the ``skyline/import-spectra`` directory (this file name
can be customized). A full description of output files can be found below.

Output Files
============
Below are each subdirectory created in ``results/nf-skyline-targeted-import`` and a description of files
that will be found in those directories.

``panorama`` Subdirectory
^^^^^^^^^^^^^^^^^^^^^^^^^
This directory contains logs for file transfers from PanoramaWeb. There will be a ``*.stderr`` and ``*.stdout`` for
each file that was transferred. Any errors encountered transferring that file will be present in the ``stderr`` file.
And the command line output of the transfer program can be found in the ``stdout`` file.

``skyline/import-spectra`` Subdirectory
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Skyline imports scan data in parallel for each scan file and merges those results into a single, final Skyline document. For each scan file, these
files will be present:

- ``my_scan_file.mzML.skyd`` - The intermediate *skyd* file generated by Skyline when importing this scan file.
- ``my_scan_file.log`` - The log output generated by Skyline for this step.

Then for the merge step, these files will be present:

- ``final.sky.zip`` - The final Skyline document containing all scan data for the targets. This file name can be customized using the ``skyline_document_name`` parameter.
- ``skyline-merge.log`` - The log output generated by Skyline for the merge step.

``skyline/reports`` Subdirectory
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
If ``.skyr`` files are specified in the parameters, all reports defined in those files will be run after the Skyline document is populated. The files generated are:

- ``report_name.report.tsv`` - The output of the ``report_name`` report in TSV format. ``report_name`` is the name of the reported defined in the ``.skyr`` file.
- ``report_name.report-generation.log`` - The log generated by Skyline when generating the report for ``report_name``.
- ``skyline-import-skyr_file_name.log`` - The log generated by Skyline when importing the ``skyr_file_name`` ``.skyr`` file.
